# 4-3. 데이터 웨어하우스 아키텍처와 모델, 혼동하지 않기 🏛️

## 📖 학습 목표
- DW 아키텍처와 데이터 모델의 차이점 이해
- 각각의 역할과 관계 파악
- 혼동하기 쉬운 개념들 명확히 구분

## 🎯 아키텍처 vs 모델, 무엇이 다른가?

### 건축으로 이해하기
```
건축 설계              데이터 웨어하우스
─────────────────     ─────────────────
건축 구조 (뼈대)   →   DW 아키텍처
인테리어 설계      →   데이터 모델
전체 건물 배치     →   시스템 구성
방 내부 가구 배치  →   테이블 구조
```

### 개념 정의
```
DW 아키텍처:
- 전체 시스템의 구성과 배치
- 데이터 흐름과 처리 방식
- 기술적 인프라 구조

데이터 모델:
- 데이터의 논리적 구조
- 테이블 간의 관계
- 비즈니스 규칙의 반영
```

## 🏗️ DW 아키텍처 유형

### 1. 단일 계층 아키텍처 (1-Tier)
```
구조:
[운영시스템] → [가상 DW] → [분석도구]

특징:
- 물리적 DW 없음
- 실시간 데이터 접근
- 운영 시스템 직접 조회

장점:
✅ 구축 비용 최소
✅ 실시간 데이터
✅ 단순한 구조

단점:
❌ 운영 시스템 부하
❌ 성능 제약
❌ 복잡한 분석 어려움
```

### 2. 2계층 아키텍처 (2-Tier)
```
구조:
[운영시스템] → [ETL] → [DW] → [분석도구]

특징:
- 중앙 집중식 DW
- 배치 처리 중심
- 통합된 데이터 저장소

장점:
✅ 운영 시스템 부하 분리
✅ 이력 데이터 보관
✅ 일관된 데이터

단점:
❌ 사용자별 최적화 부족
❌ 복잡한 구조
❌ 성능 병목 가능
```

### 3. 3계층 아키텍처 (3-Tier)
```
구조:
[운영시스템] → [ETL] → [DW] → [Data Mart] → [분석도구]

특징:
- DW + 데이터 마트 구조
- 주제별/부서별 최적화
- 계층적 데이터 관리

장점:
✅ 사용자별 최적화
✅ 성능 분산
✅ 유연한 구조

단점:
❌ 복잡한 관리
❌ 데이터 중복 가능
❌ 높은 구축 비용
```

### 4. 허브 앤 스포크 아키텍처
```
구조:
         [Data Mart A]
              ↑
[운영시스템] → [DW Hub] → [Data Mart B]
              ↓
         [Data Mart C]

특징:
- 중앙 허브 + 여러 스포크
- 표준화된 중앙 저장소
- 분산된 분석 환경

장점:
✅ 일관성과 유연성 균형
✅ 확장성 우수
✅ 표준화 용이

단점:
❌ 복잡한 설계
❌ 높은 초기 비용
❌ 전문 인력 필요
```

## 📊 데이터 모델 유형

### 1. 정규화 모델 (Inmon 방식)
```
특징:
- 3정규형 기반 설계
- 엔티티-관계 모델
- 중복 최소화

구조 예시:
고객 ──< 주문 ──< 주문상세 >── 상품
 │        │         │         │
 └── 고객분류    주문상태    상품분류

장점:
✅ 데이터 일관성
✅ 중복 최소화
✅ 유연한 확장

단점:
❌ 복잡한 조인
❌ 성능 이슈
❌ 사용자 이해 어려움
```

### 2. 차원 모델 (Kimball 방식)
```
특징:
- 스타/스노우플레이크 스키마
- 팩트-차원 구조
- 비정규화 설계

구조 예시:
     일자차원
        │
고객차원 ── 매출팩트 ── 상품차원
        │
     지역차원

장점:
✅ 직관적 이해
✅ 빠른 조회 성능
✅ 분석 친화적

단점:
❌ 데이터 중복
❌ 저장 공간 증가
❌ 복잡한 ETL
```

### 3. 데이터 볼트 모델
```
특징:
- 허브-링크-새틀라이트 구조
- 이력 추적 최적화
- 확장성 중심 설계

구조 예시:
[고객허브] ──< [주문링크] >── [상품허브]
    │              │              │
[고객새틀라이트] [주문새틀라이트] [상품새틀라이트]

장점:
✅ 높은 확장성
✅ 이력 추적 우수
✅ 병렬 처리 최적화

단점:
❌ 복잡한 구조
❌ 높은 학습 곡선
❌ 조회 성능 이슈
```

## 🔄 아키텍처와 모델의 관계

### 아키텍처가 모델에 미치는 영향
```
2계층 아키텍처 → 정규화 모델 선호
- 중앙 집중식 구조
- 일관성 중시
- 통합 관점 우선

3계층 아키텍처 → 차원 모델 선호  
- 사용자별 최적화
- 성능 중시
- 분석 관점 우선
```

### 모델이 아키텍처에 미치는 영향
```
정규화 모델 → 단순한 아키텍처
- 복잡한 조인으로 인한 성능 이슈
- 추가 계층 필요성 감소

차원 모델 → 복잡한 아키텍처
- 주제별 최적화 필요
- 다양한 데이터 마트 구성
```

## 🎨 실제 구현 사례

### 사례 1: 중소기업 DW
```
요구사항:
- 제한된 예산
- 빠른 구축 필요
- 단순한 분석

선택된 구조:
아키텍처: 2계층
모델: 차원 모델 (스타 스키마)

구현:
[ERP] → [ETL] → [DW (스타 스키마)] → [BI 도구]

결과:
✅ 3개월 내 구축 완료
✅ 직관적인 분석 환경
✅ 합리적인 비용
```

### 사례 2: 대기업 DW
```
요구사항:
- 전사 데이터 통합
- 높은 확장성
- 복잡한 분석

선택된 구조:
아키텍처: 허브 앤 스포크
모델: 하이브리드 (정규화 + 차원)

구현:
[다양한 운영시스템] → [ETL] → [정규화 DW Hub] → [차원 모델 Data Mart] → [분석도구]

결과:
✅ 일관된 전사 데이터
✅ 부서별 최적화
✅ 높은 확장성
```

### 사례 3: 클라우드 DW
```
요구사항:
- 빅데이터 처리
- 탄력적 확장
- 실시간 분석

선택된 구조:
아키텍처: 클라우드 네이티브
모델: 레이크하우스 (Lake + Warehouse)

구현:
[스트리밍 데이터] → [데이터 레이크] → [클라우드 DW] → [AI/ML 플랫폼]

결과:
✅ 페타바이트 규모 처리
✅ 실시간 분석
✅ AI/ML 통합
```

## 💡 선택 가이드라인

### 아키텍처 선택 기준
```
조직 규모:
- 소규모: 2계층
- 중규모: 3계층  
- 대규모: 허브 앤 스포크

예산:
- 제한적: 2계층
- 충분함: 3계층
- 풍부함: 허브 앤 스포크

기술 역량:
- 기본: 2계층
- 중급: 3계층
- 고급: 허브 앤 스포크
```

### 모델 선택 기준
```
분석 패턴:
- 정형 분석: 차원 모델
- 탐색적 분석: 정규화 모델
- 복합 분석: 하이브리드

성능 요구사항:
- 빠른 조회: 차원 모델
- 유연한 분석: 정규화 모델
- 균형: 하이브리드

데이터 특성:
- 안정적: 차원 모델
- 변화 많음: 정규화 모델
- 대용량: 데이터 볼트
```

## 🚨 흔한 혼동과 해결책

### 혼동 1: 아키텍처 = 모델
```
❌ 잘못된 이해:
"3계층 아키텍처를 사용하니까 차원 모델을 써야 해"

✅ 올바른 이해:
"3계층 아키텍처에서 각 계층별로 적절한 모델을 선택해야 해"
- DW 계층: 정규화 모델
- 데이터 마트 계층: 차원 모델
```

### 혼동 2: 기술 = 모델
```
❌ 잘못된 이해:
"Snowflake를 쓰니까 스노우플레이크 스키마를 써야 해"

✅ 올바른 이해:
"Snowflake는 클라우드 DW 플랫폼이고, 스노우플레이크 스키마는 데이터 모델링 기법이야"
```

### 혼동 3: 도구 = 아키텍처
```
❌ 잘못된 이해:
"Tableau를 쓰니까 특별한 아키텍처가 필요해"

✅ 올바른 이해:
"Tableau는 분석 도구이고, 아키텍처는 전체 시스템 구성이야"
```

## 🎯 실무 적용 팁

### 단계적 접근법
```
1단계: 요구사항 분석
- 비즈니스 목표 명확화
- 기술적 제약사항 파악
- 예산 및 일정 검토

2단계: 아키텍처 설계
- 전체 시스템 구성 결정
- 데이터 흐름 정의
- 기술 스택 선택

3단계: 모델 설계
- 각 계층별 모델 선택
- 상세 테이블 설계
- 성능 최적화 고려

4단계: 구현 및 검증
- 프로토타입 구축
- 성능 테스트
- 사용자 피드백 수집
```

### 성공 요인
```
□ 명확한 목표 설정
□ 적절한 기술 선택
□ 단계적 구축
□ 지속적인 모니터링
□ 사용자 참여
```

## 🎯 체크리스트: 올바른 이해

### 개념 구분
- [ ] 아키텍처와 모델의 차이를 명확히 구분하는가?
- [ ] 각각의 역할과 관계를 이해하는가?
- [ ] 기술과 방법론을 혼동하지 않는가?
- [ ] 도구와 아키텍처를 구분하는가?

### 실무 적용
- [ ] 요구사항에 따른 적절한 선택을 할 수 있는가?
- [ ] 단계적 접근법을 적용할 수 있는가?
- [ ] 성공 요인을 고려하는가?
- [ ] 지속적인 개선 방안이 있는가?

---

**다음**: [4-4. 차원 모델링, 단순함의 철학](./04-dimensional-modeling-philosophy.md)