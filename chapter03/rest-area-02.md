# 🏖️ 두 번째 쉼터: 데이터 구조 설계 정리하기

## 🎯 지금까지의 여정

3장에서 우리는 데이터 모델링의 핵심인 **구조 설계**에 대해 깊이 있게 학습했습니다. 
잠시 쉬어가며 배운 내용을 정리해보겠습니다.

## 📚 핵심 개념 복습

### 1. 구조 설계의 본질
```
데이터 구조 설계 = 비즈니스 요구사항을 안정적이고 효율적인 데이터베이스 구조로 변환

핵심 원칙:
✅ 단순성: 이해하기 쉬운 구조
✅ 일관성: 통일된 규칙과 패턴  
✅ 완전성: 모든 요구사항 반영
✅ 최소성: 불필요한 요소 제거
```

### 2. 데이터 구성도의 가치
```
구성도의 역할:
🗺️ 전체 시스템의 지도 역할
🎯 핵심 엔티티와 관계 한눈에 파악
💬 이해관계자 간 소통 도구
📋 개발 계획 수립의 기준
```

### 3. 기본키(PK)의 중요성
```
기본키 = 데이터 구조의 마스터키

설계 전략:
🔑 자연키: 비즈니스 의미 있는 식별자
🔑 대리키: 시스템 생성 식별자  
🔑 복합키: 여러 컬럼 조합 식별자

선택 기준: 안정성 > 단순성 > 성능
```

### 4. 외래키(FK)의 역할
```
외래키 = 테이블 간 관계의 연결고리

핵심 기능:
🔗 참조 무결성 보장
🔗 테이블 간 관계 정의
🔗 데이터 일관성 유지
🔗 비즈니스 규칙 구현
```

### 5. 모델링 툴의 활용
```
툴의 역할:
🛠️ 시각적 모델링 지원
🛠️ 자동 검증 및 DDL 생성
🛠️ 협업 및 버전 관리
🛠️ 생산성 향상

주의사항: 툴은 도구일 뿐, 원리가 더 중요!
```

## 🎪 실습으로 다지기

### 미니 프로젝트: 도서관 관리 시스템

#### 요구사항
```
📖 도서관에서 다음 업무를 처리해야 합니다:
- 회원 가입 및 관리
- 도서 등록 및 분류 관리
- 대출/반납 처리
- 연체료 관리
- 예약 시스템
```

#### 1단계: 핵심 엔티티 식별
<details>
<summary>답안 확인</summary>

```
핵심 엔티티:
1. 회원 - 도서관 이용자
2. 도서 - 대출 대상 자료
3. 분류 - 도서 카테고리
4. 대출 - 대출/반납 이력
5. 예약 - 도서 예약 정보
6. 연체료 - 연체 시 부과되는 요금
```
</details>

#### 2단계: 기본키 설계
<details>
<summary>답안 확인</summary>

```sql
회원: 회원번호 VARCHAR(10) -- MB + 8자리 숫자
도서: 도서번호 VARCHAR(13) -- ISBN 또는 자체 번호 체계
분류: 분류코드 VARCHAR(10) -- KDC 분류 체계 활용
대출: 대출번호 NUMBER -- 시퀀스 활용
예약: 예약번호 NUMBER -- 시퀀스 활용  
연체료: 연체료번호 NUMBER -- 시퀀스 활용
```
</details>

#### 3단계: 관계 정의
<details>
<summary>답안 확인</summary>

```
관계 정의:
회원 1:N 대출 (한 회원이 여러 책 대출)
도서 1:N 대출 (한 도서가 여러 번 대출됨)
분류 1:N 도서 (한 분류에 여러 도서)
회원 1:N 예약 (한 회원이 여러 예약)
도서 1:N 예약 (한 도서가 여러 번 예약됨)
대출 1:1 연체료 (연체된 대출에 연체료 부과)
```
</details>

## 💡 실무 인사이트

### 자주 하는 실수들

#### 실수 1: 과도한 정규화
```
❌ 문제 상황:
모든 것을 3정규형으로 만들려다 보니
5번의 조인이 필요한 단순 조회 발생

✅ 해결 방안:
조회 패턴을 고려한 적절한 비정규화
성능과 정규화의 균형점 찾기
```

#### 실수 2: 기본키 설계 실패
```
❌ 문제 상황:
이메일을 기본키로 사용했더니
사용자가 이메일 변경 시 대혼란

✅ 해결 방안:
안정적인 대리키 사용
자연키는 유니크 제약조건으로 처리
```

#### 실수 3: 외래키 제약조건 누락
```
❌ 문제 상황:
성능을 위해 외래키 제약조건을 생략했더니
잘못된 데이터가 대량 입력됨

✅ 해결 방안:
제약조건은 유지하되 성능은 다른 방법으로 해결
인덱스 최적화, 쿼리 튜닝 등 활용
```

### 성공하는 모델러의 습관

#### 습관 1: 항상 비즈니스 관점에서 시작
```
기술적 고려사항보다 비즈니스 요구사항 우선
"왜 이 데이터가 필요한가?"를 항상 질문
사용자 관점에서 모델 검토
```

#### 습관 2: 단계적 접근
```
한 번에 완벽한 모델을 만들려 하지 않음
개념 → 논리 → 물리 단계별 진행
각 단계에서 충분한 검토와 피드백
```

#### 습관 3: 지속적인 개선
```
모델은 살아있는 문서
비즈니스 변화에 따른 지속적 업데이트
정기적인 모델 리뷰 및 최적화
```

## 🎯 자가 진단 체크리스트

### 구조 설계 역량 체크
```
□ 비즈니스 요구사항을 엔티티로 변환할 수 있다
□ 적절한 기본키 설계 전략을 선택할 수 있다
□ 외래키 관계를 정확히 정의할 수 있다
□ 정규화와 성능의 균형점을 찾을 수 있다
□ 모델링 툴을 효과적으로 활용할 수 있다
```

### 실무 적용 역량 체크
```
□ 데이터 구성도를 작성할 수 있다
□ 이해관계자와 모델에 대해 소통할 수 있다
□ 기존 시스템을 분석하여 모델을 추출할 수 있다
□ 성능을 고려한 물리적 설계를 할 수 있다
□ 변경 영향도를 분석할 수 있다
```

## 🚀 다음 여정을 위한 준비

### 3장에서 배운 것
- ✅ 데이터 구조 설계의 원리와 방법
- ✅ 기본키와 외래키의 설계 전략
- ✅ 모델링 툴의 효과적 활용법

### 4장에서 배울 것
- 🎯 데이터 웨어하우스 모델링의 세계
- 🎯 차원 모델링의 철학과 기법
- 🎯 OLTP와 OLAP의 차이점
- 🎯 스타 스키마와 팩트/차원 테이블

## 💬 쉼터에서의 한마디

> "좋은 데이터 구조는 하루아침에 만들어지지 않습니다. 
> 비즈니스를 깊이 이해하고, 사용자의 관점에서 생각하며, 
> 기술적 제약사항을 고려하는 균형감각이 필요합니다.
> 
> 완벽한 모델은 없습니다. 
> 하지만 지속적으로 개선해 나가는 모델은 있습니다."

---

**휴식을 마치고**: [3-6. Case Study: N연구기관 R&D 과제 관리 데이터 모델](./06-case-study-n-research.md)로 실전 경험을 쌓아보세요! 🎯